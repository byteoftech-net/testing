<!DOCTYPE html>
<script>
fetch('https://corsproxy.io/?' + encodeURIComponent('https://old.reddit.com/r/tearsofthekingdom/')).then(function (response) {
  // The API call was successful!
  return response.text();
}).then(function (html) {
  // Convert the HTML string into a document object
  var parser = new DOMParser();
  var doc = parser.parseFromString(html, 'text/html');

  // Get all post elements
  var postElements = doc.querySelectorAll('.thing.link');

  // Array to store extracted data
  var postsData = [];

  // Iterate through each post element to extract data
  postElements.forEach(function(post) {
    var title = post.querySelector('.title').textContent.trim();
    var author = post.getAttribute('data-author');
    var time = post.querySelector('time').getAttribute('title');
    var authorRank = post.querySelector('.author').textContent.trim();
    var commentCount = post.getAttribute('data-comments-count');
    var upvotes = post.querySelector('.score.likes').getAttribute('title');
    var downvotes = post.querySelector('.score.dislikes').getAttribute('title');
    var postURL = post.getAttribute('data-url');

    // Store extracted data in an object
    var postData = {
      title: title,
      author: author,
      time: time,
      authorRank: authorRank,
      commentCount: commentCount,
      upvotes: upvotes,
      downvotes: downvotes,
      postURL: postURL
    };

    // Add the post data to the array
    postsData.push(postData);
  });

  // Convert the data to JSON format
  var jsonData = JSON.stringify(postsData);
  console.log(jsonData); // Output JSON data to console or process further
}).catch(function (err) {
  // There was an error
  console.error('Something went wrong.', err);
});
</script>
